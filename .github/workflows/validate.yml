name: Validate
on: [push, pull_request]
jobs:
  validate:
    runs-on: ubuntu-latest
    env:
      KUBERNETES_VERSION: 1.17.5
    steps:
      - uses: actions/checkout@master
      - name: Validate Helm Releases
        uses: stefanprodan/hrval-action@v3.1.0
        with:
          helmRelease: .
          helmVersion: v3
          kubernetesVersion: ${{ KUBERNETES_VERSION }}
      - name: Validate k8s manifests
        uses: instrumenta/kubeval-action@master
        with:
          version: ${{ KUBERNETES_VERSION }}